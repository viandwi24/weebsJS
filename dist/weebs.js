var Weebs;(()=>{"use strict";var t={107:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Component=e.ComponentManager=void 0;var n=function(){function t(){this.components=[]}return t.prototype.add=function(t,e){this.components.push(t),e&&t.setId(e)},t.prototype.get=function(t){return this.components.find((function(e){return e.getId()===t}))},t}();e.ComponentManager=n;var o=function(){function t(){this.id=this.constructor.name}return t.prototype.setId=function(t){this.id=t},t.prototype.getId=function(){return this.id},t.prototype.create=function(t){},t.prototype.start=function(t){},t.prototype.update=function(t){},t}();e.Component=o},497:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Entity=e.EntityManager=void 0;var o=n(607),r=function(){function t(){this.entities=[]}return t.prototype.add=function(t,e){this.entities.push(t),e&&t.setId(e)},t.prototype.get=function(t){return this.entities.find((function(e){return e.getId()===t}))},t.prototype.runLifeCycle=function(t,e){for(var n=0;n<this.entities.length;n++){var o=this.entities[n];if(o){try{"function"==typeof o.create&&"create"===t&&o.create(e),"function"==typeof o.start&&"start"===t&&o.start(e),"function"==typeof o.update&&"update"===t&&o.update(e)}catch(e){console.warn("Error on "+t+" entity",o),console.error(e)}for(var r=0;r<o.componentManager.components.length;r++){var i=o.componentManager.components[n];if(i)try{"function"==typeof i.create&&"create"===t&&i.create(e),"function"==typeof i.start&&"start"===t&&i.start(e),"function"==typeof i.update&&"update"===t&&i.update(e)}catch(e){console.warn("Error on "+t+" component",i),console.error(e)}}}}},t.prototype.getEntityHasComponent=function(t){var e="string"==typeof t?[t]:t;return this.entities.filter((function(t){for(var n=0,o=0;o<e.length;o++){var r=e[o];t&&void 0!==t.getComponent(r)&&n++}return n===e.length}))},t}();e.EntityManager=r;var i=function(){function t(){this.componentManager=new o.ComponentManager,this.id=this.constructor.name}return t.prototype.setId=function(t){this.id=t},t.prototype.getId=function(){return this.id},t.prototype.addComponent=function(t,e){return this.componentManager.add(t,e)},t.prototype.getComponent=function(t){return this.componentManager.get(t)},t.prototype.create=function(t){},t.prototype.start=function(t){},t.prototype.update=function(t){},t}();e.Entity=i},463:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Game2D=e.Game2DDefaultOptions=void 0;var o=n(607);e.Game2DDefaultOptions={resolution:{width:640,height:480}};var r=function(){function t(t){void 0===t&&(t=void 0),this.systems=[],this.systemsRunning=[],this.time={last:0,delta:0,fps:0,frame:0},this.options=t?Object.assign(e.Game2DDefaultOptions,t):e.Game2DDefaultOptions;var n=document.createElement("canvas"),r=n.getContext("2d")||void 0;this.screen={dom:void 0,canvas:n,context:r},this.sceneManager=new o.SceneManager,this.createCanvas()}return t.prototype.createCanvas=function(){this.screen.canvas.width=this.options.resolution.width,this.screen.canvas.height=this.options.resolution.height},t.prototype.mount=function(t){document.createElement("canvas"),this.screen.dom=t,this.screen.canvas&&this.screen.dom.appendChild(this.screen.canvas)},t.prototype.clearScreen=function(){var t=this.screen.context;t&&t.clearRect(0,0,this.options.resolution.width,this.options.resolution.height)},t.prototype.registerSystem=function(t){for(var e=0;e<t.length;e++){var n=t[e];this.systems.push(n)}},t.prototype.registerScene=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];"function"==typeof o&&/^\s*class\s+/.test(o.toString())&&this.sceneManager.add(new o(this.getContext()),e)}},t.prototype.getContext=function(){return{game:this,screen:this.screen,canvas:this.screen.canvas,time:this.time,scene:this.activeScene}},t.prototype.start=function(t){var e=this.sceneManager.get(t);this.activeScene=e;for(var n=0;n<this.systems.length;n++)this.systemsRunning[n]=new this.systems[n](this.getContext());if(e){try{"function"==typeof e.preload&&e.preload()}catch(t){console.warn("Error on preload scene",e),console.error(t)}try{"function"==typeof e.create&&e.create()}catch(t){console.warn("Error on create scene",e),console.error(t)}e.entityManager.runLifeCycle("create",this.getContext());try{"function"==typeof e.start&&e.start()}catch(t){console.warn("Error on start scene",e),console.error(t)}e.entityManager.runLifeCycle("start",this.getContext()),requestAnimationFrame(this.gameLoop.bind(this))}},t.prototype.gameLoop=function(){var t=performance.now();this.time.delta=(t-this.time.last)/1e3,this.time.fps=Math.round(1/this.time.delta);var e=this.activeScene;if(e){try{"function"==typeof e.update&&e.update()}catch(t){console.warn("Error on update scene",e),console.error(t)}e.entityManager.runLifeCycle("update",this.getContext())}this.clearScreen();for(var n=0;n<this.systems.length;n++)this.systemsRunning[n].execute(this.getContext());requestAnimationFrame(this.gameLoop.bind(this)),this.time.last=performance.now(),this.time.frame++},t}();e.Game2D=r},862:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=e.SceneManager=void 0;var o=n(607),r=function(){function t(){this.scenes=[]}return t.prototype.add=function(t,e){this.scenes.push(t),e&&t.setId(e)},t.prototype.get=function(t){return"function"==typeof t?this.scenes.find((function(e){return e.getId()===t.name})):this.scenes.find((function(e){return e.getId()===t}))},t}();e.SceneManager=r;var i=function(){function t(t){this.entityManager=new o.EntityManager,this.id=this.constructor.name}return t.prototype.setId=function(t){this.id=t},t.prototype.getId=function(){return this.id},t.prototype.addEntity=function(t,e){return this.entityManager.add(t,e)},t.prototype.preload=function(){},t.prototype.start=function(){},t.prototype.create=function(){},t.prototype.update=function(){},t}();e.Scene=i},818:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.System=void 0;var n=function(){function t(t){}return t.prototype.execute=function(t){},t}();e.System=n},935:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Game2D=void 0;var o=n(463);Object.defineProperty(e,"Game2D",{enumerable:!0,get:function(){return o.Game2D}})},607:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=e.System=e.Component=e.ComponentManager=e.Entity=e.EntityManager=e.Scene=e.SceneManager=e.Game2D=void 0;var o=n(935);Object.defineProperty(e,"Game2D",{enumerable:!0,get:function(){return o.Game2D}});var r=n(862);Object.defineProperty(e,"SceneManager",{enumerable:!0,get:function(){return r.SceneManager}}),Object.defineProperty(e,"Scene",{enumerable:!0,get:function(){return r.Scene}});var i=n(497);Object.defineProperty(e,"EntityManager",{enumerable:!0,get:function(){return i.EntityManager}}),Object.defineProperty(e,"Entity",{enumerable:!0,get:function(){return i.Entity}});var a=n(107);Object.defineProperty(e,"ComponentManager",{enumerable:!0,get:function(){return a.ComponentManager}}),Object.defineProperty(e,"Component",{enumerable:!0,get:function(){return a.Component}});var s=n(818);Object.defineProperty(e,"System",{enumerable:!0,get:function(){return s.System}});var c=n(557);Object.defineProperty(e,"Vector2",{enumerable:!0,get:function(){return c.Vector2}})},557:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=void 0;e.Vector2=function(t,e){this.x=t,this.y=e}}},e={},n=function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}(607);Weebs=n})();